<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edge AI Interactive Simulator</title>

    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">

    <!-- Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.2/socket.io.min.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <div class="container">
        <!-- Header -->
        <header>
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                <h1>Interactive Intrusion Simulator</h1>
                <nav style="display: flex; gap: 1rem;">
                    <a href="/"
                        style="color: #3498db; background: rgba(52,152,219,0.2); padding: 0.5rem 1rem; border-radius: 4px; text-decoration: none;">ðŸŽ®
                        Simulator</a>
                    <a href="/results"
                        style="color: #8e44ad; background: rgba(142,68,173,0.2); padding: 0.5rem 1rem; border-radius: 4px; text-decoration: none;">ðŸ“Š
                        Results</a>
                </nav>
            </div>
            <div class="controls">
                <label>Injection Mode:</label>
                <select id="injectionType">
                    <option value="boar">Wild Boar (True Positive)</option>
                    <option value="false_alarm">Wind/Noise (False Alarm)</option>
                </select>
                <span id="connectionStatus" style="color:red; margin-left: 15px;">ðŸ”´ Disconnected</span>
            </div>
        </header>

        <!-- Main Grid -->
        <div class="grid">

            <!-- Left: Topology Map -->
            <div class="card map-card">
                <h2>Field Map (Click to Inject)</h2>
                <div id="vis-container"></div>

                <div class="system-status">
                    <div>System Alert: <span id="alertLevel" class="badge">NONE</span></div>
                </div>
            </div>

            <!-- Right: Metrics -->
            <div class="metrics-column">
                <div class="card">
                    <h2>System Performance Stats (Rate %)</h2>
                    <div style="height: 200px;">
                        <canvas id="liveChart"></canvas>
                    </div>
                </div>

                <div class="card log-card">
                    <h2>Live Event Log</h2>
                    <ul id="eventList"></ul>
                </div>

                <div class="card">
                    <h3>Instructions</h3>
                    <p style="font-size: 0.9em;">
                        1. Select injection type (Boar/Noise).<br />
                        2. Click anywhere on the rings.<br />
                        3. Watch the sensor fusion logic unfold.<br />
                        <span style="color:#e67e22">Orange</span> = Thermal, <span style="color:#8e44ad">Purple</span> =
                        Voting.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>

</html>